library ieee;
use ieee.std_logic_1164.all;

package dataConsume_pack is

	  type STATE_TYPE is
		(
			INIT,
			REQ_DATA,
			WAIT_DATA,
			DATA_VALID,
			UPDATE_REG
		);
		
end dataConsume_pack;		

library ieee;
use ieee.std_logic_1164.all;
use ieee.std_logic_unsigned."+";
use ieee.std_logic_unsigned."-";
use ieee.std_logic_unsigned."=";
use work.dataConsume_pack.all;
use work.common_pack.all;


entity dataConsume is
	port (
	  clk:		in std_logic;
		reset:		in std_logic; -- synchronous reset
		start: in std_logic; -- goes high to signal data transfer
		numWords_bcd: in BCD_ARRAY_TYPE(2 downto 0);
		ctrlIn: in std_logic;
		ctrlOut: out std_logic;
		data: in std_logic_vector(7 downto 0);
		dataReady: out std_logic;
		byte: out std_logic_vector(7 downto 0);
		seqDone: out std_logic;
		maxIndex: out BCD_ARRAY_TYPE(2 downto 0);
		dataResults: out CHAR_ARRAY_TYPE(0 to RESULT_BYTE_NUM-1) -- index 3 holds the peak
	);
end dataConsume;

`protect begin_protected
`protect version = 1
`protect author = "IP Provider"
`protect encrypt_agent = "ModelSim" , encrypt_agent_info = "2020.3"
`protect key_keyowner = "MTI" , key_keyname = "MGC-DVT-MTI"
`protect key_method = "rsa"
`protect encoding = ( enctype = "base64" , line_length = 64 , bytes = 128 )
`protect key_block
QgR5RA5Yn+7p449Uhy1mNxsEWtUk1BaZL3493rp0dasYfQUF4mqwyS65NVSdD1oU
nAptbGdAhX1ns2mlrDKXB2H67LCIHcznbi9qxZetAd7hN07Lipetj6fSA/KGOhtU
r9zTm5AN1bUFFIbw3sHnvYhMxSFaqzGu8lW8TdTKvyM=
`protect data_method = "aes128-cbc"
`protect encoding = ( enctype = "base64" , line_length = 64 , bytes = 6720 )
`protect data_block
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
`protect end_protected